#!/bin/bash
# Configura branch protection via UI (mais confiÃ¡vel que API)

REPO="danvoulez/Trajectory-Engineering-Base"

echo "ðŸ”’ Para configurar branch protection, acesse:"
echo ""
echo "   https://github.com/$REPO/settings/branches"
echo ""
echo "Configure manualmente:"
echo "   âœ“ Require a pull request before merging"
echo "   âœ“ Require approvals: 1"
echo "   âœ“ Require review from Code Owners"
echo "   âœ“ Require status checks to pass"
echo "   âœ“ Require conversation resolution before merging"
echo "   âœ“ Require linear history"
echo "   âœ— Allow force pushes"
echo "   âœ— Allow deletions"
echo ""
echo "Ou use GitHub CLI (se tiver permissÃµes):"
echo "   gh api repos/$REPO/branches/main/protection \\"
echo "     --method PUT \\"
echo "     --input - <<EOF"
echo "{"
echo "  \"required_status_checks\": null,"
echo "  \"enforce_admins\": true,"
echo "  \"required_pull_request_reviews\": {"
echo "    \"required_approving_review_count\": 1,"
echo "    \"dismiss_stale_reviews\": true,"
echo "    \"require_code_owner_reviews\": true"
echo "  },"
echo "  \"restrictions\": null,"
echo "  \"required_linear_history\": true,"
echo "  \"allow_force_pushes\": false,"
echo "  \"allow_deletions\": false,"
echo "  \"required_conversation_resolution\": true"
echo "}"
echo "EOF"
